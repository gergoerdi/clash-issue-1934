# Clash issue 1934

https://github.com/clash-lang/clash-compiler/issues/1934

## Good version

```
$ rm -rf _build && \
    stack run --resolver=clash-good.yaml && \
    cat _build/Hardware.Compucolor2.topEntity/topEntity.v
```

Output:

```
/* AUTOMATICALLY GENERATED VERILOG-2001 SOURCE CODE.
** GENERATED BY CLASH 1.4.2. DO NOT MODIFY.
*/
`timescale 100fs/100fs
module topEntity
    ( // Inputs
      input  CLK // clock
    , input  RESET // reset

      // Outputs
    , output wire [7:0] VGA
    );
  wire [7:0] f2;
  reg [7:0] \$s!!_attr  = 8'd0;

  assign VGA = f2[7:0];

  assign f2 = \$s!!_attr ;

  // register begin
  always @(posedge CLK or  posedge  RESET) begin : _$s_attr_register
    if ( RESET) begin
      \$s!!_attr  <= 8'd0;
    end else begin
      \$s!!_attr  <= \$s!!_attr ;
    end
  end
  // register end


endmodule
```

## Bad version

```
$ rm -rf _build && \
    stack run --resolver=clash-bad.yaml && \
    cat _build/Hardware.Compucolor2.topEntity/topEntity.v 
```

Output:

```
/* AUTOMATICALLY GENERATED VERILOG-2001 SOURCE CODE.
** GENERATED BY CLASH 1.4.2. DO NOT MODIFY.
*/
`timescale 100fs/100fs
module topEntity
    ( // Inputs
      input  CLK // clock
    , input  RESET // reset

      // Outputs
    , output wire [7:0] VGA
    );
  wire [7:0] f2;
  reg [7:0] \$s!!_attr  = 8'd0;

  // index lit begin
  assign VGA = f2[8-1-(64'sd0)*8 -: 8];
  // index lit end

  assign f2 = \$s!!_attr ;

  // register begin
  always @(posedge CLK or  posedge  RESET) begin : _$s_attr_register
    if ( RESET) begin
      \$s!!_attr  <= 8'd0;
    end else begin
      \$s!!_attr  <= \$s!!_attr ;
    end
  end
  // register end


endmodule
```
